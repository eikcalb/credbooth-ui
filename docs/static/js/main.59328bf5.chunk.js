(this["webpackJsonpcredbooth-billpayment-ui"]=this["webpackJsonpcredbooth-billpayment-ui"]||[]).push([[0],{22:function(e,t,a){},24:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(17),s=a.n(c),o=(a(22),a(1)),i=a(5),l=a.n(i),u=a(6),d=a(4),j=(a(24),a(7)),p=a.n(j),b=a(0),m="https://credbillpayment-j5ncn.ondigitalocean.app/";var h=function(){var e=Object(n.useState)(localStorage.getItem("bearerToken")||""),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)("category"),s=Object(d.a)(c,2),i=s[0],j=s[1],h=Object(n.useState)(),O=Object(d.a)(h,2),f=O[0],v=O[1],x=Object(n.useState)(),g=Object(d.a)(x,2),N=g[0],y=g[1],S=Object(n.useState)(),w=Object(d.a)(S,2),C=w[0],k=w[1],I=Object(n.useState)(),E=Object(d.a)(I,2),q=E[0],B=E[1],D=Object(n.useState)(),F=Object(d.a)(D,2),P=F[0],T=F[1],A=Object(n.useState)([]),z=Object(d.a)(A,2),J=z[0],L=z[1],M=Object(n.useState)([]),R=Object(d.a)(M,2),V=R[0],G=R[1],H=Object(n.useState)(!1),K=Object(d.a)(H,2),Q=K[0],U=K[1],W=Object(n.useState)({phone:"",customerid:"",amount:""}),X=Object(d.a)(W,2),Y=X[0],Z=X[1],$=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(m,"billpayment/providers/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:if(n=e.sent,r=n.status,c=n.data,200===r&&2!==c.status){e.next=8;break}throw new Error(c.message&&"string"!==typeof c.message?c.message.join(". "):null===c||void 0===c?void 0:c.message);case 8:return e.abrupt("return",c.data);case 11:e.prev=11,e.t0=e.catch(0),alert("\u26a0 "+e.t0.message||!1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("".concat(m,"billpayment/products/").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:if(n=e.sent,r=n.status,c=n.data,200===r&&2!==c.status){e.next=8;break}throw new Error(c.message&&"string"!==typeof c.message?c.message.join(". "):null===c||void 0===c?void 0:c.message);case 8:return e.abrupt("return",c.data);case 11:e.prev=11,e.t0=e.catch(0),alert("\u26a0 "+e.t0.message||!1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("".concat(m,"billpayment/validate"),t,{headers:{Authorization:"Bearer ".concat(a)}});case 3:if(n=e.sent,r=n.status,c=n.data,200===r&&2!==c.status){e.next=8;break}throw new Error(c.message&&"string"!==typeof c.message?c.message.join(". "):null===c||void 0===c?void 0:c.message);case 8:return e.abrupt("return",c.data);case 11:e.prev=11,e.t0=e.catch(0),alert("\u26a0 "+e.t0.message||!1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q&&n){e.next=3;break}throw new Error("Required info was omitted");case 3:return e.next=5,p.a.post("".concat(m,"billpayment/pay"),{requestID:t,cardID:n},{headers:{Authorization:"Bearer ".concat(a)}});case 5:if(r=e.sent,c=r.status,s=r.data,200===c&&2!==s.status){e.next=10;break}throw new Error(s.message&&"string"!==typeof s.message?s.message.join(". "):null===s||void 0===s?void 0:s.message);case 10:return alert("\u2705 "+s.message),e.abrupt("return",s.data);case 14:e.prev=14,e.t0=e.catch(0),alert("\u26a0 "+e.t0.message||!1),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"section",children:[Object(b.jsxs)("div",{className:"field",children:[Object(b.jsx)("label",{className:"label is-uppercase",children:"Bearer Token"}),Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("input",{className:"input",type:"password",value:a,placeholder:"Enter Bearer token",onChange:function(e){r(e.target.value),localStorage.setItem("bearerToken",e.target.value)}})})]}),Q?Object(b.jsx)("progress",{className:"progress is-small is-danger",max:"100"}):Object(b.jsxs)(b.Fragment,{children:["category"===i&&Object(b.jsxs)("select",{value:f,onChange:function(e){U(!0),v(e.target.value),e.target.value&&$(e.target.value).then((function(e){L(e),j("product")})).finally((function(){return U(!1)}))},children:[Object(b.jsx)("option",{children:"Select Service"}),Object(b.jsx)("option",{value:"airtime",children:"Airtime"}),Object(b.jsx)("option",{value:"data",children:"Data"}),Object(b.jsx)("option",{value:"tv-subscription",children:"TV Subscription"}),Object(b.jsx)("option",{value:"electricity-bill",children:"Electricity Bill"})]}),"product"===i&&(null===J||void 0===J?void 0:J.length)>0&&Object(b.jsxs)("select",{value:N,onChange:function(e){U(!0),y(e.target.value),e.target.value&&_(parseInt(e.target.value)).then((function(e){G(e),j("purchase")})).finally((function(){return U(!1)}))},children:[Object(b.jsx)("option",{children:"Select Provider"}),J.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.name})}))]}),"purchase"===i&&(null===V||void 0===V?void 0:V.length)>0&&Object(b.jsxs)(b.Fragment,{children:["airtime"===f&&Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),U(!0);var t=J.find((function(e){return e.id===parseInt(N)}));if(!t)return alert("\u26a0 Failed to process request"),console.log("Cannot find provider",J,N,J.find((function(e){return e.id===N}))),void U(!1);ee(Object(o.a)(Object(o.a)({},Y),{},{amount:100*parseInt(Y.amount),type:f,productID:t.code})).then((function(e){B(e),j("confirm")})).finally((function(){return U(!1)}))},className:"section",children:[Object(b.jsx)("div",{className:"field",children:Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("input",{required:!0,className:"input",type:"tel",value:Y.customerid,onChange:function(e){return Z(Object(o.a)(Object(o.a)({},Y),{},{customerid:e.target.value}))},placeholder:"Phone number to recharge"})})}),Object(b.jsxs)("div",{className:"field has-addons",children:[Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("a",{className:"button is-static",children:"\u20a6"})}),Object(b.jsx)("p",{className:"control is-expanded",children:Object(b.jsx)("input",{required:!0,className:"input",type:"number",value:Y.amount,onChange:function(e){return Z(Object(o.a)(Object(o.a)({},Y),{},{amount:e.target.value}))},placeholder:"Amount to recharge"})})]}),Object(b.jsxs)("div",{className:"field has-addons",children:[Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("a",{className:"button is-static",children:"+234"})}),Object(b.jsx)("p",{className:"control is-expanded",children:Object(b.jsx)("input",{required:!0,className:"input",type:"tel",value:Y.phone,onChange:function(e){return Z(Object(o.a)(Object(o.a)({},Y),{},{phone:e.target.value}))},placeholder:"Contact phone number"})})]}),Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("button",{type:"submit",className:"button is-primary",children:"Submit"})})]}),"airtime"!==f&&Object(b.jsxs)(b.Fragment,{children:[!C&&Object(b.jsx)("select",{value:N,onChange:function(e){k(e.target.value)},children:V.map((function(e){return Object(b.jsx)("option",{value:e.code,children:e.name})}))}),C&&Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),U(!0),ee(Object(o.a)(Object(o.a)({},Y),{},{amount:100*parseInt(Y.amount),type:f,productID:C})).then((function(e){B(e),j("confirm")})).finally((function(){return U(!1)}))},className:"section",children:[Object(b.jsx)("div",{className:"field",children:Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("input",{required:!0,className:"input",type:"text",value:Y.customerid,onChange:function(e){return Z(Object(o.a)(Object(o.a)({},Y),{},{customerid:e.target.value}))},placeholder:"Enter customer details"})})}),Object(b.jsxs)("div",{className:"field has-addons",children:[Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("a",{className:"button is-static",children:"\u20a6"})}),Object(b.jsx)("p",{className:"control is-expanded",children:Object(b.jsx)("input",{required:!0,className:"input",type:"number",value:Y.amount,onChange:function(e){return Z(Object(o.a)(Object(o.a)({},Y),{},{amount:e.target.value}))},placeholder:"Amount to pay"})})]}),Object(b.jsxs)("div",{className:"field has-addons",children:[Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("a",{className:"button is-static",children:"+234"})}),Object(b.jsx)("p",{className:"control is-expanded",children:Object(b.jsx)("input",{required:!0,className:"input",type:"tel",value:Y.phone,onChange:function(e){return Z(Object(o.a)(Object(o.a)({},Y),{},{phone:e.target.value}))},placeholder:"Contact phone number"})})]}),Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("button",{type:"submit",className:"button is-primary",children:"Submit"})})]})]})]}),"confirm"===i&&q&&Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),U(!0),te(q,P).finally((function(){return U(!1)}))},className:"section",children:[Object(b.jsxs)("div",{className:"field",children:[Object(b.jsx)("label",{children:"Enter Card Token For Payment"}),Object(b.jsx)("p",{className:"control is-expanded",children:Object(b.jsx)("input",{required:!0,className:"input",type:"number",value:"".concat(P),onChange:function(e){return T(parseInt(e.target.value))},placeholder:"Enter Card Token"})})]}),Object(b.jsx)("p",{className:"control",children:Object(b.jsx)("button",{type:"submit",className:"button is-primary",children:"Submit"})})]})]})]})})},O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,45)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(h,{})}),document.getElementById("root")),O()}},[[44,1,2]]]);
//# sourceMappingURL=main.59328bf5.chunk.js.map